extends layouts/main

block angular
  != js('client')
  //- for livereload
  script(type="text/javascript", src="/javascripts/client.js")

block body
  #fb-root
  .fb-like(style="float: left;", data-href="http://apps.facebook.com/lendabooktest", data-send="true", data-layout="box_count", data-width="450", data-show-faces="true", data-font="lucida grande")
  .container
    .row(ng-controller="BookCtrl")
      .span12
        h3(style='margin-bottom: 0.6em;') 
          | Hallo {{user.first_name}}. Du willst ein Buch lesen, es dir aber nicht kaufen?
        h4 Leih es dir aus unserer Community aus.
          //small.pull-right over 3000 books available in Karlsruhe
        .row(id='book-list')
          form.span12
            input(class="search", type="text", placeholder="name, author, description, ISBN …")
          ul.unstyled.span12(class='list')
          div.hidden
            li(id='book-item')
              .span12.clearfix
                .row
                  .span10
                    div.pull-left(class="imageTag", style="width: 200px; text-align: center; margin-bottom: 10px;")
                    h4
                      span(class='title')
                      br
                      small von 
                        span(class='authorsAsString')
                    h5(style='display: inline;') ISBN: 
                      span(class='isbn')
                    p(class='description')
                  .span2
                    .lend.pull-right
                      .lenderId(style="display: none;")
                      img.lenderImage.pull-right
                      br
                      span.lenderName.pull-right
                      br
                      a.btn.btn-success.pull-right(href='#') Ausleihen
        p.lead Deine Bücher sammeln nur Staub? Verleihe sie an die Community.
          br
          a.btn(href="#addBook", role="button", data-toggle="modal") Buch eintragen
        #addBook.modal.hide.fade(role="dialog", aria-hidden="true")
          .modal-header
            button.close(type="button", data-dismiss="modal", aria-hidden="true") &times;
            h3 Buch eintragen
          .modal-body.clearfix
            form(style="float: left; width: 50%;", name='addBookForm')
              input(type="text", placeholder="Titel", ng-model="newBook.title", ng-change="OnTitleChange()", required)
              br
              input(type="text", placeholder="ISBN", ng-model="newBook.isbn", required)
              br
              input(type="text", placeholder="Coverbild", ng-model="newBook.image", required)
              br
              input(type="text", placeholder="Autoren", ng-model="newBook.authors", required)
              br
              input(type="text", placeholder="Beschreibung", ng-model="newBook.description", required)
              //h5 Who are you?
              //input(type="text", placeholder="E-Mail", ng-model="newBook.lender.email", required)
              //br
              //input(type="text", placeholder="Stadt", ng-model="newBook.location", required)
            div(style="float: right; width: 50%;")
              img(style="overflow: hidden; width: 100px; top: 0px;", width="100", src="{{newBook.image}}")
          .modal-footer
            a(href="#", class="btn btn-primary", ng-click="addBook()", ng-disabled="addBookForm.$invalid", data-dismiss="modal") Add book

        {{$.errors}}